(this["webpackJsonpakvo-react-form-example"]=this["webpackJsonpakvo-react-form-example"]||[]).push([[0],{158:function(e){e.exports=JSON.parse('{"name":"HH","question_group":[{"name":"Registration","order":1,"question":[{"id":1,"name":"Location","order":1,"type":"cascade","option":"administration","required":true},{"id":2,"name":"Geolocation","order":2,"type":"geo","center":{"lat":9.145,"lng":40.4897},"required":true},{"id":3,"name":"Name","order":3,"type":"input","required":true},{"id":4,"name":"Birthdate","order":4,"type":"date","required":true},{"id":5,"name":"Gender","order":5,"type":"option","option":[{"name":"Male","order":1},{"name":"Female","order":2},{"name":"Other","order":3}],"required":true},{"id":6,"name":"Marital Status","dependency":[{"id":5,"options":["Female","Male"]}],"order":6,"type":"option","option":[{"name":"Single","order":1},{"name":"Maried","order":2},{"name":"Widowed","order":3}],"required":true}]},{"name":"Other Question","order":2,"question":[{"id":7,"name":"Favorite Food","order":1,"type":"multiple_option","option":[{"name":"Asian","order":1},{"name":"Western","order":2},{"name":"Vegetarian","order":3}],"required":false},{"id":8,"name":"Please specify","order":2,"type":"input","required":false},{"id":9,"name":"Do you know beef rendang?","order":3,"type":"option","option":[{"name":"Yes","order":1},{"name":"No","order":2}],"required":false},{"id":10,"name":"Rate your hunger on a scale of 5 to 10","order":4,"type":"number","required":true,"rule":{"min":5,"max":10}},{"id":11,"name":"Where do you usually order Rendang from ?","dependency":[{"id":9,"options":["Yes"]},{"id":10,"min":8}],"order":5,"type":"option","option":[{"name":"Pagi Sore","order":1},{"name":"Any Rendang Restaurant","order":2}],"required":true},{"id":12,"name":"Do you want to order Rendang from Pagi Sore now?","dependency":[{"id":11,"options":["Pagi Sore"]}],"order":6,"type":"option","option":[{"name":"Yes","order":1},{"name":"No","order":2}],"required":true},{"id":13,"name":"Comment","order":7,"type":"text","required":false}]}]}')},159:function(e){e.exports=JSON.parse('[{"value":1,"label":"Jawa Barat","children":[{"value":1,"label":"Bandung"},{"value":2,"label":"Bogor"},{"value":3,"label":"Garut"},{"value":4,"label":"Sukabumi"},{"value":5,"label":"Cianjur"},{"value":6,"label":"Sumedang"}]},{"value":2,"label":"Yogyakarta","children":[{"value":1,"label":"D.I Yogyakarta"},{"value":2,"label":"Sleman"},{"value":3,"label":"Bantul"},{"value":4,"label":"Kulon Progo"},{"value":5,"label":"Gunung Kidul"}]}]')},165:function(e,n,r){e.exports=r(308)},166:function(e,n,r){},307:function(e,n,r){},308:function(e,n,r){"use strict";r.r(n);r(166);var a=r(0),t=r.n(a),l=r(26),o=r.n(l),i=r(52),u=r(150),m=r.n(u),d=r(75),c=r(42),s=r(320),p=r(319),f=r(323),y=r(325),v=r(322),g=r(317),E=r(321),h=r(161),b=r(318),k=r(101),q=r(51),w=r.n(q),x=r(314),O=r(315),S=r(316),j=r(324),F=(r(171),r(151)),I=r.n(F),P=r(152),C=r.n(P),N=(r(172),r(157)),R=r.n(N);function B(){return(B=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}var M=w.a.icon({iconUrl:I.a,shadowUrl:C.a});w.a.Marker.prototype.options.icon=M;var L={lat:0,lng:0},G=function(e){var n=e.changePos,r=e.position,l=Object(a.useRef)(null),o=Object(a.useMemo)((function(){return{dragend:function(){var e=l.current;if(null!=e){var r=e.getLatLng();n(r)}}}}),[]);return Object(x.b)({click:function(e){var r=e.latlng;n(r)}}),null!==r&&void 0!==r&&r.lat||null!==r&&void 0!==r&&r.lng?t.a.createElement(O.a,{eventHandlers:o,position:r,ref:l,draggable:!0}):""},J=function(e){var n=e.center;return Object(x.a)().panTo(n),null},T=function(e){var n=e.form,r=e.id,l=e.center,o=Object(a.useState)({lat:null,lng:null}),i=o[0],u=o[1],m=function(e){var a;(u(e),null!==e&&void 0!==e&&e.lat&&null!==e&&void 0!==e&&e.lng)&&(console.log(n),n.setFieldsValue(((a={})[r]=e,a)))},p=function(e,n){var r;m(B({},i,((r={})[e]=parseFloat(n),r)))};return t.a.createElement("div",null,t.a.createElement(d.a,{justify:"space-between",style:{marginBottom:"10px"}},t.a.createElement(c.a,{span:12,style:{paddingRight:"10px"}},t.a.createElement(s.a,{placeholder:"Latitude",style:{width:"100%"},value:(null===i||void 0===i?void 0:i.lat)||null,min:"-90",max:"90",onChange:function(e){return p("lat",e)}})),t.a.createElement(c.a,{span:12,style:{paddingLeft:"10px"}},t.a.createElement(s.a,{placeholder:"Longitude",className:"site-input-right",style:{width:"100%"},value:(null===i||void 0===i?void 0:i.lng)||null,min:"-180",max:"180",onChange:function(e){return p("lng",e)}}))),t.a.createElement(d.a,null,t.a.createElement(c.a,{span:24},t.a.createElement(S.a,{zoom:13,scrollWheelZoom:!1,style:{height:"300px",width:"100%"}},t.a.createElement(J,{center:null!==i&&void 0!==i&&i.lat&&null!==i&&void 0!==i&&i.lng?i:l||L}),t.a.createElement(j.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),t.a.createElement(G,{form:n,id:r,changePos:m,position:i})))))},V=function(e){var n=e.option,r=e.id,a=e.name,l=e.keyform,o=e.required,i=e.rules;return t.a.createElement(p.a.Item,{key:l,name:r,label:l+1+". "+a,rules:i,required:o},n.length<3?t.a.createElement(f.a.Group,null,t.a.createElement(y.b,{direction:"vertical"},n.map((function(e,n){return t.a.createElement(f.a,{key:n,value:e.name},e.name)})))):t.a.createElement(v.a,{style:{width:"100%"},allowClear:!0},n.map((function(e,n){return t.a.createElement(v.a.Option,{key:n,value:e.name},e.name)}))))},Y=function(e){var n=e.option,r=e.id,a=e.name,l=e.keyform,o=e.required,i=e.rules;return t.a.createElement(p.a.Item,{key:l,name:r,label:l+1+". "+a,rules:i,required:o},t.a.createElement(v.a,{mode:"multiple",style:{width:"100%"}},n.map((function(e,n){return t.a.createElement(v.a.Option,{key:n,value:e.name},e.name)}))))},_=function(e){var n=e.id,r=e.name,a=e.keyform,l=e.required,o=e.rules;return t.a.createElement(p.a.Item,{key:a,name:n,label:a+1+". "+r,rules:o,required:l},t.a.createElement(g.a,{style:{width:"100%"}}))},D=function(e){var n=e.cascade,r=e.id,a=e.name,l=e.keyform,o=e.required,i=e.rules;return t.a.createElement(p.a.Item,{key:l,name:r,label:l+1+". "+a,rules:i,required:o},t.a.createElement(E.a,{options:n}))},W=function(e){var n=e.id,r=e.name,a=e.keyform,l=e.required,o=e.rules;return t.a.createElement(p.a.Item,{key:a,name:n,label:a+1+". "+r,rules:o,required:l},t.a.createElement(s.a,{style:{width:"100%"}}))},z=function(e){var n=e.id,r=e.name,a=e.keyform,l=e.required,o=e.rules;return t.a.createElement(p.a.Item,{key:a,name:n,label:a+1+". "+r,rules:o,required:l},t.a.createElement(h.a,{sytle:{width:"100%"}}))},H=function(e){var n=e.id,r=e.name,a=e.keyform,l=e.required,o=e.rules;return t.a.createElement(p.a.Item,{key:a,name:n,label:a+1+". "+r,rules:o,required:l},t.a.createElement(R.a,{row:4}))},U=function(e){var n=e.rules,r=e.cascade,a=e.index,l=e.field;switch(l.type){case"option":return t.a.createElement(V,B({keyform:a,rules:n},l));case"multiple_option":return t.a.createElement(Y,B({keyform:a,rules:n},l));case"cascade":return t.a.createElement(D,B({keyform:a,cascade:r[l.option],rules:n},l));case"date":return t.a.createElement(_,B({keyform:a,rules:n},l));case"number":return t.a.createElement(W,B({keyform:a,rules:n},l));case"text":return t.a.createElement(H,B({keyform:a,rules:n},l));default:return t.a.createElement(z,B({keyform:a,rules:n},l))}},A=function(e){var n=e.fields,r=e.cascade,l=e.form;return n.map((function(e,n){var o=[];null!==e&&void 0!==e&&e.required&&(o=[{validator:function(n,r){return r?Promise.resolve():Promise.reject(new Error(e.name+" is required"))}}]),null!==e&&void 0!==e&&e.rule&&(o=[].concat(o,function(e){var n=e.rule;return"number"===e.type?[B({},n,{type:"number"})]:[{}]}(e)));var i=Object(a.useState)(null),u=i[0],m=i[1];return"geo"===(null===e||void 0===e?void 0:e.type)?t.a.createElement(c.a,{key:n},t.a.createElement(p.a.Item,{name:e.id,label:n+1+". "+e.name,rules:o,required:null===e||void 0===e?void 0:e.required},t.a.createElement(h.a,{value:u,disabled:!0,hidden:!0})),t.a.createElement(T,{form:l,setValue:m,id:e.id,center:e.center})):null!==e&&void 0!==e&&e.dependency?t.a.createElement(p.a.Item,{noStyle:!0,key:n,shouldUpdate:function(n,r){return e.dependency.map((function(e){return n[e.id]!==r[e.id]})).filter((function(e){return!0===e})).length}},(function(a){var i=a.getFieldValue;return e.dependency.map((function(e){return function(e,n){if(null!==e&&void 0!==e&&e.options)return e.options.includes(n);var r=!1;return null!==e&&void 0!==e&&e.min&&(r=n>=e.min),null!==e&&void 0!==e&&e.max&&(r=n<=e.max),r}(e,i(e.id))})).filter((function(e){return!1===e})).length?null:t.a.createElement(U,{rules:o,form:l,index:n,cascade:r,field:e})})):t.a.createElement(U,{rules:o,form:l,key:n,index:n,cascade:r,field:e})}))},K=function(e){var n=e.forms,r=e.onChange,a=e.onFinish,l=e.style,o=p.a.useForm()[0];if(null===n||void 0===n||!n.question_group)return"Error Format";return t.a.createElement(p.a,{form:o,layout:"vertical",name:n.name,scrollToFirstError:"true",onValuesChange:function(e,n){return setTimeout((function(){!function(e,n,a){var t=e.getFieldsError().length,l=Object.keys(a).map((function(e){return a[e]})).filter((function(e){return e})).length;r&&r({current:n,values:a,progress:l/t*100})}(o,e,n)}),100)},onFinish:function(e){a?a(e):console.log(e)},style:l},null===n||void 0===n?void 0:n.question_group.map((function(e,r){return t.a.createElement(b.a,{key:r,title:e.name||"Section "+(r+1)},t.a.createElement(A,{fields:e.question,cascade:n.cascade,form:o}))})),t.a.createElement(d.a,null,t.a.createElement(c.a,{span:24},t.a.createElement(b.a,null,t.a.createElement(p.a.Item,null,t.a.createElement(k.a,{type:"primary",htmlType:"submit"},"Submit"))))))},Q=r(158),Z=r(159),X=(r(307),Object(i.a)(Object(i.a)({},Q),{},{cascade:{administration:Z}})),$=function(){return t.a.createElement("div",null,t.a.createElement("div",{className:"half-width"},t.a.createElement(K,{forms:X,onChange:function(e){console.log(e)},onFinish:function(e){var n=Object.keys(e).map((function(n){return!!e[n]&&{question:parseInt(n),value:e[n]}}));console.log(n.filter((function(e){return e})))},style:{fontSize:"30px"}})),t.a.createElement("div",{className:"half-width json-source"},t.a.createElement(m.a,{src:X,theme:"monokai",displayDataTypes:!1})))};o.a.render(t.a.createElement($,null),document.getElementById("root"))}},[[165,1,2]]]);
//# sourceMappingURL=main.2da39ede.chunk.js.map