(this["webpackJsonpakvo-react-form-example"]=this["webpackJsonpakvo-react-form-example"]||[]).push([[0],{155:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return St}));var r=n(0),a=n.n(r),o=n(55),i=n(29),u=n(124),l=n(42),c=n(170),d=n(323),s=n(108),f=n(318),m=n(319),p=n(107),v=n(169),h=n(85),y=n(52),g=n.n(y),_=n(168),b=n(316),E=n(317),k=n(322),q=(n(178),n(156)),j=n.n(q),w=n(157),O=n.n(w),S=(n(179),n(162)),x=n.n(S);function F(){return(F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var P=g.a.icon({iconUrl:j.a,shadowUrl:O.a});g.a.Marker.prototype.options.icon=P;var z={lat:0,lng:0},I=function(e){var t=e.changePos,n=e.position,o=Object(r.useRef)(null),i=Object(r.useMemo)((function(){return{dragend:function(){var e=o.current;if(null!=e){var n=e.getLatLng();t(n)}}}}),[]);return Object(_.b)({click:function(e){var n=e.latlng;t(n)}}),null!==n&&void 0!==n&&n.lat||null!==n&&void 0!==n&&n.lng?a.a.createElement(b.a,{eventHandlers:i,position:n,ref:o,draggable:!0}):""},M=function(e){var t=e.center;return Object(_.a)().panTo(t),null},N=function(e){var t=e.form,n=e.id,l=e.center,c=Object(r.useState)({lat:null,lng:null}),d=c[0],s=c[1],f=function(e){var r;(s(e),null!==e&&void 0!==e&&e.lat&&null!==e&&void 0!==e&&e.lng)&&(console.log(t),t.setFieldsValue(((r={})[n]=e,r)))},m=function(e,t){var n;f(F({},d,((n={})[e]=parseFloat(t),n)))};return a.a.createElement("div",null,a.a.createElement(o.a,{justify:"space-between",style:{marginBottom:"10px"}},a.a.createElement(i.a,{span:12,style:{paddingRight:"10px"}},a.a.createElement(u.a,{placeholder:"Latitude",style:{width:"100%"},value:(null===d||void 0===d?void 0:d.lat)||null,min:"-90",max:"90",onChange:function(e){return m("lat",e)}})),a.a.createElement(i.a,{span:12,style:{paddingLeft:"10px"}},a.a.createElement(u.a,{placeholder:"Longitude",className:"site-input-right",style:{width:"100%"},value:(null===d||void 0===d?void 0:d.lng)||null,min:"-180",max:"180",onChange:function(e){return m("lng",e)}}))),a.a.createElement(o.a,null,a.a.createElement(i.a,{span:24},a.a.createElement(E.a,{zoom:13,scrollWheelZoom:!1,style:{height:"300px",width:"100%"}},a.a.createElement(M,{center:null!==d&&void 0!==d&&d.lat&&null!==d&&void 0!==d&&d.lng?d:l||z}),a.a.createElement(k.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),a.a.createElement(I,{form:t,id:n,changePos:f,position:d})))))};var R=function(e,t){for(var n=-1,r=null==e?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a},A="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:{},C="object"==typeof A&&A&&A.Object===Object&&A,T="object"==typeof self&&self&&self.Object===Object&&self,B=C||T||Function("return this")(),G=B.Symbol,L=Object.prototype,Y=L.hasOwnProperty,$=L.toString,D=G?G.toStringTag:void 0;var J=function(e){var t=Y.call(e,D),n=e[D];try{e[D]=void 0;var r=!0}catch(o){}var a=$.call(e);return r&&(t?e[D]=n:delete e[D]),a},V=Object.prototype.toString;var W=function(e){return V.call(e)},U=G?G.toStringTag:void 0;var H=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":U&&U in Object(e)?J(e):W(e)};var K=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var Q=function(e){if(!K(e))return!1;var t=H(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},Z=B["__core-js_shared__"],X=function(){var e=/[^.]+$/.exec(Z&&Z.keys&&Z.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();var ee=function(e){return!!X&&X in e},te=Function.prototype.toString;var ne=function(e){if(null!=e){try{return te.call(e)}catch(t){}try{return e+""}catch(t){}}return""},re=/^\[object .+?Constructor\]$/,ae=Function.prototype,oe=Object.prototype,ie=ae.toString,ue=oe.hasOwnProperty,le=RegExp("^"+ie.call(ue).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var ce=function(e){return!(!K(e)||ee(e))&&(Q(e)?le:re).test(ne(e))};var de=function(e,t){return null==e?void 0:e[t]};var se=function(e,t){var n=de(e,t);return ce(n)?n:void 0},fe=se(Object,"create");var me=function(){this.__data__=fe?fe(null):{},this.size=0};var pe=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ve=Object.prototype.hasOwnProperty;var he=function(e){var t=this.__data__;if(fe){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return ve.call(t,e)?t[e]:void 0},ye=Object.prototype.hasOwnProperty;var ge=function(e){var t=this.__data__;return fe?void 0!==t[e]:ye.call(t,e)};var _e=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=fe&&void 0===t?"__lodash_hash_undefined__":t,this};function be(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}be.prototype.clear=me,be.prototype.delete=pe,be.prototype.get=he,be.prototype.has=ge,be.prototype.set=_e;var Ee=be;var ke=function(){this.__data__=[],this.size=0};var qe=function(e,t){return e===t||e!==e&&t!==t};var je=function(e,t){for(var n=e.length;n--;)if(qe(e[n][0],t))return n;return-1},we=Array.prototype.splice;var Oe=function(e){var t=this.__data__,n=je(t,e);return!(n<0)&&(n==t.length-1?t.pop():we.call(t,n,1),--this.size,!0)};var Se=function(e){var t=this.__data__,n=je(t,e);return n<0?void 0:t[n][1]};var xe=function(e){return je(this.__data__,e)>-1};var Fe=function(e,t){var n=this.__data__,r=je(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function Pe(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Pe.prototype.clear=ke,Pe.prototype.delete=Oe,Pe.prototype.get=Se,Pe.prototype.has=xe,Pe.prototype.set=Fe;var ze=Pe,Ie=se(B,"Map");var Me=function(){this.size=0,this.__data__={hash:new Ee,map:new(Ie||ze),string:new Ee}};var Ne=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var Re=function(e,t){var n=e.__data__;return Ne(t)?n["string"==typeof t?"string":"hash"]:n.map};var Ae=function(e){var t=Re(this,e).delete(e);return this.size-=t?1:0,t};var Ce=function(e){return Re(this,e).get(e)};var Te=function(e){return Re(this,e).has(e)};var Be=function(e,t){var n=Re(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function Ge(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ge.prototype.clear=Me,Ge.prototype.delete=Ae,Ge.prototype.get=Ce,Ge.prototype.has=Te,Ge.prototype.set=Be;var Le=Ge;var Ye=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};var $e=function(e){return this.__data__.has(e)};function De(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Le;++t<n;)this.add(e[t])}De.prototype.add=De.prototype.push=Ye,De.prototype.has=$e;var Je=De;var Ve=function(e,t,n,r){for(var a=e.length,o=n+(r?1:-1);r?o--:++o<a;)if(t(e[o],o,e))return o;return-1};var We=function(e){return e!==e};var Ue=function(e,t,n){for(var r=n-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1};var He=function(e,t,n){return t===t?Ue(e,t,n):Ve(e,We,n)};var Ke=function(e,t){return!!(null==e?0:e.length)&&He(e,t,0)>-1};var Qe=function(e,t,n){for(var r=-1,a=null==e?0:e.length;++r<a;)if(n(t,e[r]))return!0;return!1};var Ze=function(e){return function(t){return e(t)}};var Xe=function(e,t){return e.has(t)},et=Math.min;var tt=function(e,t,n){for(var r=n?Qe:Ke,a=e[0].length,o=e.length,i=o,u=Array(o),l=1/0,c=[];i--;){var d=e[i];i&&t&&(d=R(d,Ze(t))),l=et(d.length,l),u[i]=!n&&(t||a>=120&&d.length>=120)?new Je(i&&d):void 0}d=e[0];var s=-1,f=u[0];e:for(;++s<a&&c.length<l;){var m=d[s],p=t?t(m):m;if(m=n||0!==m?m:0,!(f?Xe(f,p):r(c,p,n))){for(i=o;--i;){var v=u[i];if(!(v?Xe(v,p):r(e[i],p,n)))continue e}f&&f.push(p),c.push(m)}}return c};var nt=function(e){return e};var rt=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},at=Math.max;var ot=function(e,t,n){return t=at(void 0===t?e.length-1:t,0),function(){for(var r=arguments,a=-1,o=at(r.length-t,0),i=Array(o);++a<o;)i[a]=r[t+a];a=-1;for(var u=Array(t+1);++a<t;)u[a]=r[a];return u[t]=n(i),rt(e,this,u)}};var it=function(e){return function(){return e}},ut=function(){try{var e=se(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),lt=ut?function(e,t){return ut(e,"toString",{configurable:!0,enumerable:!1,value:it(t),writable:!0})}:nt,ct=Date.now;var dt=function(e){var t=0,n=0;return function(){var r=ct(),a=16-(r-n);if(n=r,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(lt);var st=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};var ft=function(e){return null!=e&&st(e.length)&&!Q(e)};var mt=function(e){return null!=e&&"object"==typeof e};var pt=function(e){return mt(e)&&ft(e)};var vt=function(e){return pt(e)?e:[]},ht=function(e,t){return dt(ot(e,t,nt),e+"")}((function(e){var t=R(e,vt);return t.length&&t[0]===e[0]?tt(t):[]})),yt=function(e){var t=e.option,n=e.id,r=e.name,o=e.keyform,i=e.required,u=e.rules;return a.a.createElement(l.a.Item,{key:o,name:n,label:o+1+". "+r,rules:u,required:i},t.length<3?a.a.createElement(c.a.Group,null,a.a.createElement(d.b,{direction:"vertical"},t.map((function(e,t){return a.a.createElement(c.a,{key:t,value:e.name},e.name)})))):a.a.createElement(s.a,{style:{width:"100%"},allowClear:!0},t.map((function(e,t){return a.a.createElement(s.a.Option,{key:t,value:e.name},e.name)}))))},gt=function(e){var t=e.option,n=e.id,r=e.name,o=e.keyform,i=e.required,u=e.rules;return a.a.createElement(l.a.Item,{key:o,name:n,label:o+1+". "+r,rules:u,required:i},a.a.createElement(s.a,{mode:"multiple",style:{width:"100%"}},t.map((function(e,t){return a.a.createElement(s.a.Option,{key:t,value:e.name},e.name)}))))},_t=function(e){var t=e.id,n=e.name,r=e.keyform,o=e.required,i=e.rules;return a.a.createElement(l.a.Item,{key:r,name:t,label:r+1+". "+n,rules:i,required:o},a.a.createElement(f.a,{style:{width:"100%"}}))},bt=function(e){var t=e.cascade,n=e.id,r=e.name,o=e.keyform,i=e.required,u=e.rules;return a.a.createElement(l.a.Item,{key:o,name:n,label:o+1+". "+r,rules:u,required:i},a.a.createElement(m.a,{options:t}))},Et=function(e){var t=e.id,n=e.name,r=e.keyform,o=e.required,i=e.rules;return a.a.createElement(l.a.Item,{key:r,name:t,label:r+1+". "+n,rules:i,required:o},a.a.createElement(u.a,{style:{width:"100%"}}))},kt=function(e){var t=e.id,n=e.name,r=e.keyform,o=e.required,i=e.rules;return a.a.createElement(l.a.Item,{key:r,name:t,label:r+1+". "+n,rules:i,required:o},a.a.createElement(p.a,{sytle:{width:"100%"}}))},qt=function(e){var t=e.id,n=e.name,r=e.keyform,o=e.required,i=e.rules;return a.a.createElement(l.a.Item,{key:r,name:t,label:r+1+". "+n,rules:i,required:o},a.a.createElement(x.a,{row:4}))},jt=function(e){var t=e.rules,n=e.cascade,r=e.index,o=e.field;switch(o.type){case"option":return a.a.createElement(yt,F({keyform:r,rules:t},o));case"multiple_option":return a.a.createElement(gt,F({keyform:r,rules:t},o));case"cascade":return a.a.createElement(bt,F({keyform:r,cascade:n[o.option],rules:t},o));case"date":return a.a.createElement(_t,F({keyform:r,rules:t},o));case"number":return a.a.createElement(Et,F({keyform:r,rules:t},o));case"text":return a.a.createElement(qt,F({keyform:r,rules:t},o));default:return a.a.createElement(kt,F({keyform:r,rules:t},o))}},wt=function(e){var t=e.fields,n=e.cascade,o=e.form,u=e.current;return t.map((function(e,t){var c=[];null!==e&&void 0!==e&&e.required&&(c=[{validator:function(t,n){return n?Promise.resolve():Promise.reject(new Error(e.name+" is required"))}}]),null!==e&&void 0!==e&&e.rule&&(c=[].concat(c,function(e){var t=e.rule;return"number"===e.type?[F({},t,{type:"number"})]:[{}]}(e)));var d=Object(r.useState)(null),s=d[0],f=d[1];return"geo"===(null===e||void 0===e?void 0:e.type)?a.a.createElement(i.a,{key:t},a.a.createElement(l.a.Item,{name:e.id,label:t+1+". "+e.name,rules:c,required:null===e||void 0===e?void 0:e.required},a.a.createElement(p.a,{value:s,disabled:!0,hidden:!0})),a.a.createElement(N,{form:o,setValue:f,id:e.id,center:e.center})):null!==e&&void 0!==e&&e.dependency?a.a.createElement(l.a.Item,{noStyle:!0,key:t,shouldUpdate:u},(function(r){return e.dependency.map((function(e){return function(e,t){var n;if(null!==e&&void 0!==e&&e.options)return"string"===typeof t&&(t=[t]),(null===(n=ht(e.options,t))||void 0===n?void 0:n.length)>0;var r=!1;return null!==e&&void 0!==e&&e.min&&(r=t>=e.min),null!==e&&void 0!==e&&e.max&&(r=t<=e.max),r}(e,r.getFieldValue(e.id))})).filter((function(e){return!1===e})).length?null:a.a.createElement(jt,{rules:c,form:o,index:t,cascade:n,field:e})})):a.a.createElement(jt,{rules:c,form:o,key:t,index:t,cascade:n,field:e})}))},Ot=function e(t,n,r){var a=r.map((function(e){return e.id})),o=t.filter((function(e){return a.includes(e.id)})).filter((function(e){return null===e||void 0===e?void 0:e.dependency}));return o.length&&(r=o.map((function(e){return e.dependency})),n=[n].concat(r).flatMap((function(e){return e})),o.forEach((function(r){null!==r&&void 0!==r&&r.dependency&&(n=e(t,n,r.dependency))}))),n},St=function(e){var t,n,u=e.forms,c=e.onChange,d=e.onFinish,s=e.style;u=function(e){var t=null===e||void 0===e?void 0:e.question_group.map((function(e){return e.question})).flatMap((function(e){return e})),n=t.map((function(e){return null!==e&&void 0!==e&&e.dependency?F({},e,{dependency:Ot(t,e.dependency,e.dependency)}):e}));return F({},e,{question_group:e.question_group.map((function(e){return F({},e,{question:e.question.map((function(e){return n.find((function(t){return t.id===e.id}))}))})}))})}(u);var f=l.a.useForm()[0],m=Object(r.useState)({}),p=m[0],y=m[1];if(null===(t=u)||void 0===t||!t.question_group)return"Error Format";return a.a.createElement(l.a,{form:f,layout:"vertical",name:u.name,scrollToFirstError:"true",onValuesChange:function(e,t){return setTimeout((function(){!function(e,t,n){var r=e.getFieldsError().length,a=Object.keys(n).map((function(e){return n[e]})).filter((function(e){return e})).length;c&&(y(n),c({current:t,values:n,progress:a/r*100}))}(f,e,t)}),100)},onFinish:function(e){d&&d(e)},style:s},null===(n=u)||void 0===n?void 0:n.question_group.map((function(e,t){return a.a.createElement(v.a,{key:t,title:e.name||"Section "+(t+1)},a.a.createElement(wt,{fields:e.question,cascade:u.cascade,form:f,current:p}))})),a.a.createElement(o.a,null,a.a.createElement(i.a,{span:24},a.a.createElement(v.a,null,a.a.createElement(l.a.Item,null,a.a.createElement(h.a,{type:"primary",htmlType:"submit"},"Submit"))))))}}).call(this,n(110))},163:function(e){e.exports=JSON.parse('{"name":"HH","question_group":[{"name":"Registration","order":1,"question":[{"id":1,"name":"Location","order":1,"type":"cascade","option":"administration","required":true},{"id":2,"name":"Geolocation","order":2,"type":"geo","center":{"lat":9.145,"lng":40.4897},"required":true},{"id":3,"name":"Name","order":3,"type":"input","required":true},{"id":4,"name":"Birthdate","order":4,"type":"date","required":true},{"id":5,"name":"Gender","order":5,"type":"option","option":[{"name":"Male","order":1},{"name":"Female","order":2},{"name":"Other","order":3}],"required":true},{"id":6,"name":"Marital Status","dependency":[{"id":5,"options":["Female","Male"]}],"order":6,"type":"option","option":[{"name":"Single","order":1},{"name":"Maried","order":2},{"name":"Widowed","order":3}],"required":true}]},{"name":"Other Question","order":2,"question":[{"id":7,"name":"Favorite Food","order":1,"type":"multiple_option","option":[{"name":"Asian","order":1},{"name":"Western","order":2},{"name":"Vegetarian","order":3}],"required":false},{"id":8,"name":"Please specify","order":2,"type":"input","required":true,"dependency":[{"id":7,"options":["Asian","Western"]}]},{"id":9,"name":"Do you know beef rendang?","order":3,"type":"option","option":[{"name":"Yes","order":1},{"name":"No","order":2}],"required":false},{"id":10,"name":"Rate your hunger on a scale of 5 to 10","order":4,"type":"number","required":true,"rule":{"min":5,"max":10}},{"id":11,"name":"Where do you usually order Rendang from ?","dependency":[{"id":9,"options":["Yes"]},{"id":10,"min":8}],"order":5,"type":"option","option":[{"name":"Pagi Sore","order":1},{"name":"Any Rendang Restaurant","order":2}],"required":true},{"id":12,"name":"Do you want to order Rendang from Pagi Sore now?","dependency":[{"id":11,"options":["Pagi Sore"]}],"order":6,"type":"option","option":[{"name":"Yes","order":1},{"name":"No","order":2}],"required":true},{"id":13,"name":"Order List","dependency":[{"id":12,"options":["Yes"]}],"order":7,"type":"multiple_option","option":[{"name":"Rendang","order":1},{"name":"Ayam Pop","order":2},{"name":"Paru Goreng","order":3},{"name":"Baluik Goreng","order":4}],"required":true},{"id":14,"name":"Comment","order":8,"type":"text","required":false}]}]}')},164:function(e){e.exports=JSON.parse('[{"value":1,"label":"Jawa Barat","children":[{"value":1,"label":"Bandung"},{"value":2,"label":"Bogor"},{"value":3,"label":"Garut"},{"value":4,"label":"Sukabumi"},{"value":5,"label":"Cianjur"},{"value":6,"label":"Sumedang"}]},{"value":2,"label":"Yogyakarta","children":[{"value":1,"label":"D.I Yogyakarta"},{"value":2,"label":"Sleman"},{"value":3,"label":"Bantul"},{"value":4,"label":"Kulon Progo"},{"value":5,"label":"Gunung Kidul"}]}]')},172:function(e,t,n){e.exports=n(315)},173:function(e,t,n){},314:function(e,t,n){},315:function(e,t,n){"use strict";n.r(t);n(173);var r=n(0),a=n.n(r),o=n(26),i=n.n(o),u=n(63),l=n(53),c=n(154),d=n.n(c),s=n(155),f=n(163),m=n(164),p=(n(314),Object(l.a)(Object(l.a)({},f),{},{cascade:{administration:m}})),v=function(){var e=Object(r.useState)(!0),t=Object(u.a)(e,2),n=t[0],o=t[1];return a.a.createElement("div",{className:"display-container"},a.a.createElement("div",{className:n?"half-width":"half-width full"},a.a.createElement("button",{className:"button-hide-show",onClick:function(){return o(!n)}},n?"\u25b6":"\u25c0"),a.a.createElement(s.a,{forms:p,onChange:function(e){console.log(e)},onFinish:function(e){var t=Object.keys(e).map((function(t){return!!e[t]&&{question:parseInt(t),value:e[t]}}));console.log(t.filter((function(e){return e})))},style:{fontSize:"30px"}})),a.a.createElement("div",{className:"half-width json-source"+(n?"":" shrink")},a.a.createElement(d.a,{src:p,theme:"monokai",displayDataTypes:!1})))};i.a.render(a.a.createElement(v,null),document.getElementById("root"))}},[[172,1,2]]]);
//# sourceMappingURL=main.b34db0c8.chunk.js.map